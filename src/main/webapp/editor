package edu.harvard.chs.citecollectionmanager

import edu.harvard.chs.citecollectionmanager.CodeFlow

if (CodeFlow.instance.authorized()) {
String google_client_id = CodeFlow.instance.secrets.getDetails().getClientId()
print """<!DOCTYPE html>
<html lang="en-US">
<head>
<title>gazComp</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script type="text/javascript" src="http://documentcloud.github.com/underscore/underscore-min.js"></script>
<script type="text/javascript" src="gazcomp/js/gazComp.js"></script>
<script type="text/javascript" src="gazcomp/js/underscore-min.js"></script>
<script type="text/javascript" src="gazcomp/js/fusiontables.js"></script>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC7ppibBFDEjgVih7qbhQCZMsxsdFvtfNQ&sensor=false"></script>
<link href="gazcomp/css/gazComp.css" rel="stylesheet"></link>
</head>
<body>
  <script type="text/javascript">
    window.gazcomp_config = {
"""
print "      google_client_id: '" + google_client_id + "',"
print """
    };
"""
print "    window.FUSION_TABLES_URI = window.location.href.replace(/\\/editor(#.*)?\$/,'');"
print """
  </script>
</body>
</html>
"""
}
else {
  response.sendRedirect('home')
}

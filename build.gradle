apply plugin: 'war'
apply plugin: 'jetty'
apply plugin: 'groovy'
apply plugin: 'maven'

group = "edu.harvard.chs"
version = "0.0.1"

repositories {
    mavenCentral()
    maven {
        url "http://beta.hpcc.uh.edu/nexus/content/repositories/releases"
    }
    maven {
        url "http://mavenrepo.google-api-java-client.googlecode.com/hg/"
    }
}

dependencies {
    compile group: 'commons-io', name: 'commons-io', version: '1.4'
    compile group: 'log4j', name: 'log4j', version: '1.2.15', ext: 'jar'
    compile group: 'org.codehaus.groovy', name: 'groovy-all', version: '2.0.4'
    compile group: 'com.google.apis', name: 'google-api-services-oauth2', version: 'v1-rev14-1.8.0-beta'
    compile group: 'com.google.http-client', name: 'google-http-client-jackson2', version: '1.11.0-beta'
    compile group: 'com.google.oauth-client', name: 'google-oauth-client-jetty', version: '1.11.0-beta'
}

httpPort = 8988
stopPort = 9451
stopKey = 'foo'

task srcCopy(type: Copy) {
    from(file('src/main/webapp'))
    into('build/webapp/cite-collection-manager')
}

task srcZip(type: Zip, dependsOn: srcCopy) {
    classifier = 'sources'
    from(file('build/webapp'))
}

artifacts {
    archives srcZip
}
